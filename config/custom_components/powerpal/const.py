"""Constants for Powerpal."""

# from homeassistant.components.sensor import SensorDeviceClass, SensorStateClass
from homeassistant.backports.enum import StrEnum

from bluepy import btle

# SensorDeviceClass.POWER # (W/kW)
# SensorStateClass.MEASUREMENT # The state represents a measurement in present time

DOMAIN = "powerpal"

POWERPAL_SERVICE = btle.UUID("59DAABCD-12F4-25A6-7D4F-55961DCE4205")
BATTERY_SERVICE = btle.UUID("0000180f-0000-1000-8000-00805f9b34fb")


class PowerpalCharacteristics(StrEnum):
    """Known GATT characteristics."""

    # Powerpal service (59DAABCD-12F4-25A6-7D4F-55961DCE4205)
    TIME = "59DA0004-12F4-25A6-7D4F-55961DCE4205"
    LED_SENSITIVITY = "59DA0008-12F4-25A6-7D4F-55961DCE4205"
    UUID = "59DA0009-12F4-25A6-7D4F-55961DCE4205"
    SERIAL_NUMBER = "59DA0010-12F4-25A6-7D4F-55961DCE4205"
    PAIRING_CODE = "59DA0011-12F4-25A6-7D4F-55961DCE4205"
    MEASUREMENT = "59DA0001-12F4-25A6-7D4F-55961DCE4205"
    PULSE = "59DA0003-12F4-25A6-7D4F-55961DCE4205"
    MILLIS_SINCE_LAST_PULSE = "59DA0012-12F4-25A6-7D4F-55961DCE4205"
    FIRST_REC = "59DA0005-12F4-25A6-7D4F-55961DCE4205"
    MEASUREMENT_ACCESS = "59DA0002-12F4-25A6-7D4F-55961DCE4205"
    READING_BATCH_SIZE = "59DA0013-12F4-25A6-7D4F-55961DCE4205"
    # Battery service (TODO)
    BATTERY = "00002A19-0000-1000-8000-00805F9B34FB"


DEFAULT_MAC = "F4:8F:9C:D5:79:B9"
DEFAULT_PAIRING_CODE = "872957"
DEFAULT_IMPULSE_RATE = 1000

# regex constants for configuration schema
REGEX_MAC = "(?i)^(?:[0-9A-F]{2}[:]){5}(?:[0-9A-F]{2})$"
REGEX_PAIRING_CODE = "^[0-9]{6}$"
